{% load static %}
<div 
  x-data="{ financeOpen: false }" 
  :class="open ? 'w-64' : 'w-20 items-center'" 
  class="bg-black text-white h-[85vh] flex flex-col transition-all duration-300 shadow-2xl rounded-2xl z-40"
>
<!-- Toggle -->
      <button @click="open = !open" class="hover:bg-gray-700 flex items-center justify-center space-y-2 gap-3 p-3">
        <img src="{% static 'media/logo/logo_obox.png' %}" alt="logo_obox">
      </button>


  <!-- Menu -->
  <nav class="flex flex-col h-full items-stretch mt-4 space-y-2">
    <a href="{% url 'home' %}" class="flex items-center gap-3 p-3 hover:bg-gray-700">
      <i data-lucide="home" class="w-5 h-5"></i>
      <span x-show="open">Inicio</span>
    </a>

    <a href="{% url 'list_student' %}" class="flex items-center gap-3 p-3 hover:bg-gray-700">
      <i data-lucide="users" class="w-5 h-5"></i>
      <span x-show="open">Alunos</span>
    </a>
    <a href="{% url 'frequence' %}" class="flex items-center gap-3 p-3 hover:bg-gray-700">
      <i data-lucide="thumbs-up" class="w-5 h-5"></i>
      <span x-show="open">Frequencia</span>
    </a>
    <!-- Dropdown Financeiro -->
    <div class="relative">
      <button @click="financeOpen = !financeOpen" class="w-full flex items-center gap-3 p-3 hover:bg-gray-700">
        <i data-lucide="calculator" class="w-5 h-5"></i>
        <span x-show="open" class="flex-1 text-left">Financeiro</span>
        <i data-lucide="chevron-right" 
           :class="financeOpen ? 'rotate-90' : ''" 
           x-show="open" 
           class="w-4 h-4 transition-transform ml-auto"></i>
      </button>

      <!-- Quando sidebar aberto -->
      <div x-show="financeOpen && open" class="ml-10 flex flex-col space-y-2">
        <a href="{% url 'cashier' %}" class="flex items-center gap-2 p-2 hover:bg-gray-700 rounded">
          <i data-lucide="hand-coins" class="w-4 h-4"></i> Caixa
        </a>
        <a href="{% url 'list_bill' %}" class="flex items-center gap-2 p-2 hover:bg-gray-700 rounded">
          <i data-lucide="banknote-arrow-up" class="w-4 h-4"></i> Contas
        </a>
         <a href="#" class="flex items-center gap-2 p-2 hover:bg-gray-700 rounded">
          <i data-lucide="banknote-arrow-down" class="w-4 h-4"></i> Vendas
        </a>
        <a href="{% url 'nfes' %}" class="flex items-center gap-2 p-2 hover:bg-gray-700 rounded">
          <i data-lucide="file-text" class="w-4 h-4"></i> NFSe
        </a>
      </div>

      <!-- Quando sidebar fechado (popover Ã  direita) -->
      <div 
        x-show="financeOpen && !open" 
        class="absolute left-full top-0 mt-0 ml-1 bg-gray-900 rounded-lg shadow-lg p-2 w-40 z-50"
      >
       <a href="{% url 'cashier' %}" class="flex items-center gap-2 p-2 hover:bg-gray-700 rounded">
          <i data-lucide="hand-coins" class="w-4 h-4"></i> Caixa
        </a>
        <a href="{% url 'list_bill' %}" class="flex items-center gap-2 p-2 hover:bg-gray-700 rounded">
          <i data-lucide="banknote-arrow-up" class="w-4 h-4"></i> Contas
        </a>
        <a href='#' class="flex items-center gap-3 p-3 hover:bg-gray-700">
         <i data-lucide="banknote-arrow-down" class="w-5 h-5"></i>Vendas
        </a>
        <a href="{% url 'nfes' %}" class="flex items-center gap-2 p-2 hover:bg-gray-700 rounded">
          <i data-lucide="file-text" class="w-4 h-4"></i> NFSe
        </a>
      </div>
    </div>
     <a href="{% url 'list_plan' %}" class="flex items-center gap-3 p-3 hover:bg-gray-700">
      <i data-lucide="clipboard-list" class="w-5 h-5"></i>
      <span x-show="open">Planos</span>
    </a>
    <a href="#" class="flex items-center gap-3 p-3 hover:bg-gray-700">
      <i data-lucide="chart-no-axes-column" class="w-5 h-5"></i>
      <span x-show="open">Dashboard</span>
    </a>
   
    <a href="{% url 'list_stock' %}" class="flex items-center gap-3 p-3 hover:bg-gray-700">
      <i data-lucide="boxes" class="w-5 h-5"></i>
      <span x-show="open">Estoque</span>
    </a>
     <a href="{% url 'logout' %}"
     class="flex items-center absolute bottom-1 px-4 py-2 hover:bg-gray-700 rounded-lg transition-colors">
    <i data-lucide="log-out" class="w-5 h-5 mr-3"></i>
    <span x-show="open">Sair</span>
  </a>
  </nav>
</div>

<!-- Alpine.js e Lucide -->

<script>
  document.addEventListener("DOMContentLoaded", () => {
    lucide.createIcons();
  });
</script>
